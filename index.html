<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Механіка у віртуальному світі</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.19.0/dist/tf.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Панель керування -->
    <div id="control-panel">
        <h2>Параметри експерименту</h2>
        
        <div class="experiment-selector">
            <label>Експеримент:</label>
            <select id="experiment-select">
                <option value="projectile">Балістичний рух</option>
                <option value="pendulum">Математичний маятник</option>
                <option value="collision">Зіткнення тіл</option>
                <option value="energy">Збереження енергії</option>
            </select>
        </div>

        <div class="parameters">
            <h3>Загальні параметри</h3>
            <div class="param-group">
                <label>Маса (кг): <span id="mass-value">1</span></label>
                <input type="range" id="mass" min="0.1" max="10" step="0.1" value="1">
            </div>
            
            <div class="param-group" id="velocity-group">
                <label>Початкова швидкість (м/с): <span id="velocity-value">10</span></label>
                <input type="range" id="velocity" min="1" max="50" step="1" value="10">
            </div>
            
            <div class="param-group" id="angle-group">
                <label>Кут запуску (°): <span id="angle-value">45</span></label>
                <input type="range" id="angle" min="0" max="90" step="5" value="45">
            </div>
            
            <div class="param-group" id="length-group" style="display:none;">
                <label>Довжина підвісу (м): <span id="length-value">2</span></label>
                <input type="range" id="length" min="0.5" max="5" step="0.1" value="2">
            </div>
            
            <div class="param-group">
                <label>Гравітація (м/с²): <span id="gravity-value">9.8</span></label>
                <input type="range" id="gravity" min="0" max="20" step="0.1" value="9.8">
            </div>
        </div>

        <div class="controls">
            <button id="start-btn" class="btn-primary">Старт</button>
            <button id="reset-btn" class="btn-secondary">Скинути</button>
            <button id="predict-btn" class="btn-ml">ML Прогноз</button>
        </div>

        <div id="stats">
            <h3>Поточні показники</h3>
            <div id="stats-content">
                <p>Час: <span id="time">0</span> с</p>
                <p>Швидкість: <span id="current-velocity">0</span> м/с</p>
                <p>Висота: <span id="height">0</span> м</p>
                <p>Кінетична енергія: <span id="kinetic-energy">0</span> Дж</p>
                <p>Потенціальна енергія: <span id="potential-energy">0</span> Дж</p>
            </div>
        </div>

        <div id="ml-prediction" style="display:none;">
            <h3>ML Прогнозування</h3>
            <p>Прогнозована дальність: <span id="predicted-range">-</span> м</p>
            <p>Прогнозований час польоту: <span id="predicted-time">-</span> с</p>
            <p>Точність моделі: <span id="model-accuracy">-</span>%</p>
        </div>
    </div>

    <!-- VR сцена -->
    <a-scene physics="gravity: -9.8; debug: false" background="color: #87CEEB">
        <!-- Камера з контролерами -->
        <a-entity id="cameraRig" position="0 1.6 10">
            <a-camera look-controls wasd-controls>
                <a-cursor visible="false"></a-cursor>
            </a-camera>
        </a-entity>

        <!-- Освітлення -->
        <a-light type="ambient" color="#BBB"></a-light>
        <a-light type="directional" color="#FFF" intensity="0.6" position="-0.5 1 1"></a-light>

        <!-- Земля -->
        <a-plane id="ground" position="0 0 0" rotation="-90 0 0" width="100" height="100" 
                 color="#7BC8A4" static-body></a-plane>

        <!-- Сітка координат -->
        <a-entity id="grid" position="0 0.01 0">
            <!-- Координатна сітка буде згенерована через JS -->
        </a-entity>

        <!-- Експеримент 1: Балістичний рух -->
        <a-entity id="projectile-experiment" visible="true">
            <a-sphere id="projectile" position="-10 1 0" radius="0.3" color="#FF6B6B" 
                     dynamic-body mass="1">
                <a-text value="Снаряд" position="0 0.5 0" align="center" width="3"></a-text>
            </a-sphere>
            
            <!-- Траєкторія -->
            <a-entity id="trajectory"></a-entity>
            
            <!-- Гармата -->
            <a-cylinder id="cannon" position="-10 0.5 0" radius="0.5" height="2" 
                       color="#4ECDC4" rotation="0 0 -45"></a-cylinder>
        </a-entity>

        <!-- Експеримент 2: Математичний маятник -->
        <a-entity id="pendulum-experiment" visible="false">
            <a-cylinder id="pendulum-support" position="0 5 0" radius="0.1" height="0.5" 
                       color="#333" static-body></a-cylinder>
            <a-entity id="pendulum-string" position="0 5 0">
                <a-cylinder radius="0.02" height="2" color="#666" position="0 -1 0"></a-cylinder>
            </a-entity>
            <a-sphere id="pendulum-ball" position="0 3 0" radius="0.3" color="#FF6B6B" 
                     dynamic-body mass="1">
                <a-text value="Маятник" position="0 0.5 0" align="center" width="3"></a-text>
            </a-sphere>
        </a-entity>

        <!-- Експеримент 3: Зіткнення тіл -->
        <a-entity id="collision-experiment" visible="false">
            <a-box id="box1" position="-5 1 0" width="1" height="1" depth="1" 
                   color="#FF6B6B" dynamic-body mass="1">
                <a-text value="Тіло 1" position="0 0.8 0" align="center" width="3"></a-text>
            </a-box>
            <a-box id="box2" position="5 1 0" width="1" height="1" depth="1" 
                   color="#4ECDC4" dynamic-body mass="1">
                <a-text value="Тіло 2" position="0 0.8 0" align="center" width="3"></a-text>
            </a-box>
        </a-entity>

        <!-- Експеримент 4: Збереження енергії -->
        <a-entity id="energy-experiment" visible="false">
            <!-- Горка -->
            <a-entity id="ramp" position="-5 0 0">
                <a-box position="0 2.5 0" rotation="0 0 30" width="10" height="0.2" depth="2" 
                       color="#95E1D3" static-body></a-box>
            </a-entity>
            <a-sphere id="energy-ball" position="-8 5 0" radius="0.3" color="#FF6B6B" 
                     dynamic-body mass="1">
                <a-text value="Куля" position="0 0.5 0" align="center" width="3"></a-text>
            </a-sphere>
            
            <!-- Енергетична діаграма -->
            <a-plane id="energy-chart" position="8 3 0" width="4" height="3" color="#FFF">
                <a-text value="Енергія системи" position="0 1.3 0" align="center" 
                       width="8" color="#000"></a-text>
            </a-plane>
        </a-entity>

        <!-- Інформаційна панель у VR -->
        <a-plane id="info-panel" position="0 3 -5" width="6" height="2" color="#FFF" opacity="0.9">
            <a-text id="info-text" value="Механіка у віртуальному світі\nВиберіть експеримент та натисніть Старт" 
                   position="0 0 0.01" align="center" width="10" color="#000"></a-text>
        </a-plane>

        <!-- Вимірювальна лінійка -->
        <a-entity id="ruler" position="0 0.1 5">
            <!-- Буде згенеровано через JS -->
        </a-entity>
    </a-scene>

    <script src="script.js"></script>
</body>
</html>