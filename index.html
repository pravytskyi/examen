<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Механіка у віртуальному світі</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@4.2.3/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="control-panel">
        <h2>Параметри експерименту</h2>
        
        <div class="experiment-selector">
            <label>Експеримент:</label>
            <select id="experiment-select">
                <option value="projectile">Балістичний рух</option>
                <option value="pendulum">Математичний маятник</option>
                <option value="collision">Зіткнення тіл</option>
                <option value="energy">Збереження енергії</option>
            </select>
        </div>

        <div class="parameters">
            <h3>Загальні параметри</h3>
            <div class="param-group" id="mass1-group">
                <label>Маса тіла 1 (кг): <span id="mass1-value">1</span></label>
                <input type="range" id="mass1" min="0.1" max="10" step="0.1" value="1">
            </div>

            <div class="param-group" id="mass2-group" style="display:none;">
                <label>Маса тіла 2 (кг): <span id="mass2-value">1</span></label>
                <input type="range" id="mass2" min="0.1" max="10" step="0.1" value="1">
            </div>
            
            <div class="param-group" id="velocity-group" style="display:none;">
                <label>Початкова швидкість (м/с): <span id="velocity-value">5</span></label>
                <input type="range" id="velocity" min="1" max="20" step="1" value="5">
            </div>
            
            <div class="param-group" id="angle-group">
                <label>Кут запуску (°): <span id="angle-value">45</span></label>
                <input type="range" id="angle" min="0" max="90" step="5" value="45">
            </div>
            
            <div class="param-group" id="length-group" style="display:none;">
                <label>Довжина підвісу (м): <span id="length-value">2</span></label>
                <input type="range" id="length" min="0.5" max="5" step="0.1" value="2">
            </div>
            
            <div class="param-group">
                <label>Гравітація (м/с²): <span id="gravity-value">9.8</span></label>
                <input type="range" id="gravity" min="0" max="20" step="0.1" value="9.8">
            </div>
        </div>

        <div class="controls">
            <button id="start-btn" class="btn-primary">Старт</button>
            <button id="reset-btn" class="btn-secondary">Скинути</button>
            <button id="predict-btn" class="btn-ml">ML Прогноз</button>
        </div>

        <div id="stats">
            <h3>Поточні показники</h3>
            <div id="stats-content">
                <p>Час: <span id="time">0</span> с</p>
                <p>Швидкість: <span id="current-velocity">0</span> м/с</p>
                <p>Висота: <span id="height">0</span> м</p>
                <p>Кінетична енергія: <span id="kinetic-energy">0</span> Дж</p>
                <p>Потенціальна енергія: <span id="potential-energy">0</span> Дж</p>
                <p id="total-energy-p" style="display:none;">Сумарна енергія: <span id="total-energy">0</span> Дж</p>
            </div>
        </div>

        <div id="ml-prediction" style="display:none;">
            <h3>ML Прогнозування</h3>
            <p>Прогнозована дальність: <span id="predicted-range">-</span> м</p>
            <p>Прогнозований час польоту: <span id="predicted-time">-</span> с</p>
            <p>Точність моделі: <span id="model-accuracy">-</span></p>
        </div>
    </div>

    <a-scene physics="debug: false">
        <a-entity position="0 1.6 10">
            <a-camera look-controls wasd-controls>
                <a-cursor geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                         material="color: black; shader: flat"></a-cursor>
            </a-camera>
        </a-entity>

        <a-light type="ambient" color="#404040"></a-light>
        <a-light type="directional" color="#ffffff" intensity="0.5" position="-1 2 1"></a-light>

        <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" 
                 color="#7BC8A4" static-body></a-plane>

        <a-entity id="grid"></a-entity>
        
        <a-entity id="projectile-experiment" visible="true">
             <a-entity id="cannon" position="-10 0.5 0" rotation="0 0 -45">
                <a-cylinder color="#7A7A7A" height="0.5" radius="0.5" position="0 0.25 0"></a-cylinder>
                <a-box color="#5A5A5A" width="2" height="0.2" depth="0.2" position="1 0.5 0"></a-box>
            </a-entity>
            <a-sphere id="projectile" radius="0.3" color="#FF5733" position="-10 1 0"></a-sphere>
            <a-entity id="trajectory"></a-entity>
        </a-entity>

        <a-entity id="pendulum-experiment" visible="false">
            <a-sphere id="pendulum-anchor" radius="0.1" color="#000" position="0 5 0"></a-sphere>
            <a-entity id="pendulum-string" line="start: 0 5 0; end: 0 3 0; color: #333"></a-entity>
            <a-sphere id="pendulum-ball" radius="0.3" color="#4287f5" position="0 3 0"></a-sphere>
        </a-entity>

        <a-entity id="collision-experiment" visible="false">
            <a-box id="box1" position="-5 0.5 0" width="1" height="1" depth="1" color="#FF5733" dynamic-body="mass: 1"></a-box>
            <a-text id="text1" value="m1" color="black" align="center" position="-5 1.7 0"></a-text>
            <a-box id="box2" position="5 0.5 0" width="1" height="1" depth="1" color="#4287f5" dynamic-body="mass: 1"></a-box>
            <a-text id="text2" value="m2" color="black" align="center" position="5 1.7 0"></a-text>
        </a-entity>

        <a-entity id="energy-experiment" visible="false">
            <a-box position="-4 1.5 0" rotation="0 0 20" width="5" height="0.2" depth="2" color="#95E1D3" static-body></a-box>
            <a-box position="0 0.1 0" width="5.5" height="0.2" depth="2" color="#95E1D3" static-body></a-box>
            <a-box position="4 1.5 0" rotation="0 0 -20" width="5" height="0.2" depth="2" color="#95E1D3" static-body></a-box>
            
            <a-sphere id="energy-ball1" radius="0.3" color="#FF6B6B" position="-6 2.8 0" dynamic-body="mass: 1"></a-sphere>
            <a-sphere id="energy-ball2" radius="0.4" color="#4ECDC4" position="5.5 2.5 0" dynamic-body="mass: 1.5"></a-sphere>
        </a-entity>

        <a-plane position="0 4 -5" width="8" height="2" color="#FFF" opacity="0.9">
            <a-text value="Механіка у віртуальному світі\nВиберіть експеримент та натисніть Старт" 
                   position="0 0 0.01" align="center" width="12" color="#000"></a-text>
        </a-plane>
    </a-scene>
    <script src="script.js"></script>
</body>
</html>
